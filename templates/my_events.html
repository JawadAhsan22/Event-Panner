<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Events</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <!-- NAVBAR -->
    <div class="navbar">
        <div>
            <a href="{{ url_for('dashboard') }}"><b>Event Planner</b></a>
        </div>
        <div>
            <a href="{{ url_for('create_event') }}">Create Event</a>
            <a href="{{ url_for('dashboard') }}">Dashboard</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>

    <div class="container">

        <h1>Your Events</h1>

        <!-- FLASH MESSAGES -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% if my_events %}
            <div style="margin-top:25px;">
            
                {% for event in my_events %}
                    <!-- Event Card -->
                    <div class="card" style="margin-bottom:25px;">
                        
                        <h3 style="margin-top:0;">{{ event[2] }}</h3>

                        <p><b>Description:</b> {{ event[3] }}</p>
                        <p><b>Location:</b> {{ event[4] }}</p>
                        <p><b>Date & Time:</b> {{ event[5] }}</p>
                        <p><b>ID:</b> {{ event[0] }}</p>

                        <!-- Buttons row -->
                        <div style="display:flex; gap:15px; margin-top:15px;">

                            <!-- Edit Button -->
                            <a class="btn" 
                               style="text-align:center; background: var(--gold);"
                               href="{{ url_for('edit_event', event_id=event[0]) }}">
                                Edit
                            </a>

                            <!-- Delete Button -->
                            <form action="{{ url_for('delete_event', event_id=event[0]) }}" 
                                  method="post"
                                  onsubmit="return confirm('Are you sure you want to delete this event?');">
                                <button class="btn" type="submit" style="background:#c14646;">
                                    Delete
                                </button>
                            </form>

                        </div>

                    </div>
                {% endfor %}

            </div>

        {% else %}
            <p style="text-align:center; margin-top:30px; font-size:18px;">
                You have not created any events yet.
            </p>
        {% endif %}

        <div style="text-align:center; margin-top:25px;">
            <a class="btn" href="{{ url_for('dashboard') }}">Back to Dashboard</a>
        </div>

    </div>

</body>
</html>
